const {prioritize} = require('../modules/prioritize-commits.js')

test('tests prioritize', () => {
  expect(prioritize({
    opencl: {
      GTX: {
        '0000000000000000000000000000000000000001': {
          'test.fut': {
            datasets: {
              'dataset1': {
                avg: 100
              },
              'dataset2': {
                avg: 30
              }
            }
          }
        },
        '0000000000000000000000000000000000000002': {
          'test.fut': {
            datasets: {
              'dataset1': {
                avg: 100
              },
              'dataset2': {
                avg: 30
              }
            }
          }
        },
        '0000000000000000000000000000000000000003': {
          'test.fut': {
            datasets: {
              'dataset1': {
                avg: 150
              },
              'dataset2': {
                avg: 32
              }
            }
          }
        },
        '0000000000000000000000000000000000000004': {
          'test.fut': {
            datasets: {
              'dataset1': {
                avg: 101
              },
              'dataset2': {
                avg: 29
              }
            }
          }
        },
        '0000000000000000000000000000000000000005': {
          'test.fut': {
            datasets: {
              'dataset1': {
                avg: 100
              },
              'dataset2': {
                avg: 30
              }
            }
          }
        },
        '0000000000000000000000000000000000000006': {
          'test.fut': {
            datasets: {
              'dataset1': {
                avg: 50
              },
              'dataset2': {
                avg: 15
              }
            }
          }
        },
        '0000000000000000000000000000000000000007': {
          'test.fut': {
            datasets: {
              'dataset1': {
                avg: 45
              },
              'dataset2': {
                avg: 12
              }
            }
          }
        },
        '0000000000000000000000000000000000000008': {
          'test.fut': {
            datasets: {
              'dataset1': {
                avg: 50
              },
              'dataset2': {
                avg: 14
              }
            }
          }
        },
        '0000000000000000000000000000000000000009': {
          'test.fut': {
            datasets: {
              'dataset1': {
                avg: 15
              },
              'dataset2': {
                avg: 13
              }
            }
          }
        },
      }
    }
  }, {
    '0000000000000000000000000000000000000001': {
      date: new Date('2018-01-01 12:00:00 +0200')
    },
    '0000000000000000000000000000000000000002': {
      date: new Date('2018-01-02 12:00:00 +0200')
    },
    '0000000000000000000000000000000000000003': {
      date: new Date('2018-01-03 12:00:00 +0200')
    },
    '0000000000000000000000000000000000000004': {
      date: new Date('2018-01-04 12:00:00 +0200')
    },
    '0000000000000000000000000000000000000005': {
      date: new Date('2018-01-05 12:00:00 +0200')
    },
    '0000000000000000000000000000000000000006': {
      date: new Date('2018-01-06 12:00:00 +0200')
    },
    '0000000000000000000000000000000000000007': {
      date: new Date('2018-01-07 12:00:00 +0200')
    },
    '0000000000000000000000000000000000000008': {
      date: new Date('2018-01-08 12:00:00 +0200')
    },
    '0000000000000000000000000000000000000009': {
      date: new Date('2018-01-09 12:00:00 +0200')
    }
  })).toEqual([
    '0000000000000000000000000000000000000006',
    '0000000000000000000000000000000000000005',
    '0000000000000000000000000000000000000009',
    '0000000000000000000000000000000000000008',
    '0000000000000000000000000000000000000004',
    '0000000000000000000000000000000000000003',
    '0000000000000000000000000000000000000002',
    '0000000000000000000000000000000000000007',
    '0000000000000000000000000000000000000001'
  ])
})
